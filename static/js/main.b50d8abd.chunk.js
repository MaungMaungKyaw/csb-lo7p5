(this["webpackJsonpredux-essentials-example"]=this["webpackJsonpredux-essentials-example"]||[]).push([[0],{1132:function(e,t){},1135:function(e,t,n){"use strict";n.r(t);var a,r=n(0),s=n.n(r),c=n(31),o=n.n(c),u=(n(68),n(16)),i=n(3),l=function(){return s.a.createElement("nav",null,s.a.createElement("section",null,s.a.createElement("h1",null,"Redux Essentials Example"),s.a.createElement("div",{className:"navContent"},s.a.createElement("div",{className:"navLinks"},s.a.createElement(u.b,{to:"/"},"Posts")))))},m=n(5),d=function(e){var t=e.userId,n=Object(m.c)((function(e){return e.users.find((function(e){return e.id===t}))}));return s.a.createElement("span",null,"by ",n?n.name:"Unknown author")},p=n(1137),f=n(1136),b=function(e){var t=e.timestamp,n="";if(t){var a=Object(p.a)(t),r=Object(f.a)(a);n="".concat(r," ago")}return s.a.createElement("span",{title:t},"\xa0 ",s.a.createElement("i",null,n))},h=n(15),E=n(18),O=n(9),j=n.n(O),v=n(17),g=n(6),x=n(19),y=n(61);function w(e){return k.apply(this,arguments)}function k(){return(k=Object(v.a)(j.a.mark((function e(t){var n,a,r,s,c,o,u,i=arguments;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:{},a=n.body,r=Object(y.a)(n,["body"]),s={"Content-Type":"application/json"},c=Object(x.a)(Object(x.a)({method:a?"POST":"GET"},r),{},{headers:Object(x.a)(Object(x.a)({},s),r.headers)}),a&&(c.body=JSON.stringify(a)),e.prev=4,e.next=7,window.fetch(t,c);case 7:return u=e.sent,e.next=10,u.json();case 10:if(o=e.sent,!u.ok){e.next=13;break}return e.abrupt("return",o);case 13:throw new Error(u.statusText);case 16:return e.prev=16,e.t0=e.catch(4),e.abrupt("return",Promise.reject(e.t0.message?e.t0.message:o));case 19:case"end":return e.stop()}}),e,null,[[4,16]])})))).apply(this,arguments)}w.get=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return w(e,Object(x.a)(Object(x.a)({},t),{},{method:"GET"}))},w.post=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return w(e,Object(x.a)(Object(x.a)({},n),{},{body:t}))};var N=Object(g.b)("posts/fetchPosts",Object(v.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.get("/fakeApi/posts");case 2:return t=e.sent,e.abrupt("return",t.posts);case 4:case"end":return e.stop()}}),e)})))),S=Object(g.b)("posts/addNewPost",function(){var e=Object(v.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.post("/fakeApi/posts",{post:t});case 2:return n=e.sent,e.abrupt("return",n.post);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),C=Object(g.c)({name:"posts",initialState:{posts:[],status:"idle",error:null},reducers:{reactionAdded:function(e,t){var n=t.payload,a=n.postId,r=n.reaction,s=e.posts.find((function(e){return e.id===a}));s&&s.reactions[r]++},postUpdated:function(e,t){var n=t.payload,a=n.id,r=n.title,s=n.content,c=e.posts.find((function(e){return e.id===a}));c&&(c.title=r,c.content=s)}},extraReducers:(a={},Object(E.a)(a,N.pending,(function(e,t){e.status="loading"})),Object(E.a)(a,N.fulfilled,(function(e,t){e.status="succeeded",e.posts=e.posts.concat(t.payload)})),Object(E.a)(a,N.rejected,(function(e,t){e.status="failed",e.error=t.payload})),Object(E.a)(a,S.fulfilled,(function(e,t){e.posts.push(t.payload)})),a)}),I=C.actions,P=(I.postAdded,I.postUpdated),T=I.reactionAdded,A=C.reducer,F=function(e){return e.posts.posts},M=function(e,t){return e.posts.posts.find((function(e){return e.id===t}))},U={thumbsUp:"\ud83d\udc4d",hooray:"\ud83c\udf89",heart:"\u2764\ufe0f",rocket:"\ud83d\ude80",eyes:"\ud83d\udc40"},D=function(e){var t=e.post,n=Object(m.b)(),a=Object.entries(U).map((function(e){var a=Object(h.a)(e,2),r=a[0],c=a[1];return s.a.createElement("button",{key:r,type:"button",className:"muted-button reaction-button",onClick:function(){return n(T({postId:t.id,reaction:r}))}},c," ",t.reactions[r])}));return s.a.createElement("div",null,a)},R=function(e){var t=e.post;return s.a.createElement("article",{className:"post-excerpt",key:t.id},s.a.createElement("h3",null,t.title),s.a.createElement("div",null,s.a.createElement(d,{userId:t.user}),s.a.createElement(b,{timestamp:t.date})),s.a.createElement("p",{className:"post-content"},t.content.substring(0,100)),s.a.createElement(D,{post:t}),s.a.createElement(u.b,{to:"/posts/".concat(t.id),className:"button muted-button"},"View Post"))},L=function(){var e,t=Object(m.b)(),n=Object(m.c)(F),a=Object(m.c)((function(e){return e.posts.status})),c=Object(m.c)((function(e){return e.posts.error}));if(Object(r.useEffect)((function(){"idle"===a&&t(N())}),[a,t]),"loading"===a)e=s.a.createElement("div",{className:"loader"},"Loading...");else if("succeeded"===a){e=n.slice().sort((function(e,t){return t.date.localeCompare(e.date)})).map((function(e){return s.a.createElement(R,{key:e.id,post:e})}))}else"error"===a&&(e=s.a.createElement("div",null,c));return s.a.createElement("section",{className:"posts-list"},s.a.createElement("h2",null,"Posts"),e)},q=function(){var e=Object(r.useState)(""),t=Object(h.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(""),o=Object(h.a)(c,2),u=o[0],i=o[1],l=Object(r.useState)(""),d=Object(h.a)(l,2),p=d[0],f=d[1],b=Object(r.useState)("idle"),E=Object(h.a)(b,2),O=E[0],x=E[1],y=Object(m.b)(),w=Object(m.c)((function(e){return e.users})),k=[n,u,p].every(Boolean)&&"idle"===O,N=function(){var e=Object(v.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!k){e.next=18;break}return e.prev=1,x("pending"),e.next=5,y(S({title:n,content:u,user:p}));case 5:t=e.sent,Object(g.e)(t),a(""),i(""),f(""),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.error("Failed to save the post: ",e.t0);case 15:return e.prev=15,x("idle"),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[1,12,15,18]])})));return function(){return e.apply(this,arguments)}}(),C=w.map((function(e){return s.a.createElement("option",{key:e.id,value:e.id},e.name)}));return s.a.createElement("section",null,s.a.createElement("h2",null,"Add a New Post"),s.a.createElement("form",null,s.a.createElement("label",{htmlFor:"postTitle"},"Post Title:"),s.a.createElement("input",{type:"text",id:"postTitle",name:"postTitle",placeholder:"What's on your mind?",value:n,onChange:function(e){return a(e.target.value)}}),s.a.createElement("label",{htmlFor:"postAuthor"},"Author:"),s.a.createElement("select",{id:"postAuthor",value:p,onChange:function(e){return f(e.target.value)}},s.a.createElement("option",{value:""}),C),s.a.createElement("label",{htmlFor:"postContent"},"Content:"),s.a.createElement("textarea",{id:"postContent",name:"postContent",value:u,onChange:function(e){return i(e.target.value)}}),s.a.createElement("button",{type:"button",onClick:N,disabled:!k},"Save Post")))},z=function(e){var t=e.match.params.postId,n=Object(m.c)((function(e){return M(e,t)})),a=Object(r.useState)(n.title),c=Object(h.a)(a,2),o=c[0],u=c[1],l=Object(r.useState)(n.content),d=Object(h.a)(l,2),p=d[0],f=d[1],b=Object(m.b)(),E=Object(i.g)();return s.a.createElement("section",null,s.a.createElement("h2",null,"Edit Post"),s.a.createElement("form",null,s.a.createElement("label",{htmlFor:"postTitle"},"Post Title:"),s.a.createElement("input",{type:"text",id:"postTitle",name:"postTitle",placeholder:"What's on your mind?",value:o,onChange:function(e){return u(e.target.value)}}),s.a.createElement("label",{htmlFor:"postContent"},"Content:"),s.a.createElement("textarea",{id:"postContent",name:"postContent",value:p,onChange:function(e){return f(e.target.value)}})),s.a.createElement("button",{type:"button",onClick:function(){o&&p&&(b(P({id:t,title:o,content:p})),E.push("/posts/".concat(t)))}},"Save Post"))},J=function(e){var t=e.match.params.postId,n=Object(m.c)((function(e){return M(e,t)}));return n?s.a.createElement("section",null,s.a.createElement("article",{className:"post"},s.a.createElement("h2",null,n.title),s.a.createElement("div",null,s.a.createElement(d,{userId:n.user}),s.a.createElement(b,{timestamp:n.date})),s.a.createElement("p",{className:"post-content"},n.content),s.a.createElement(D,{post:n}),s.a.createElement(u.b,{to:"/editPost/".concat(n.id),className:"button"},"Edit Post"))):s.a.createElement("section",null,s.a.createElement("h2",null,"Post not found!"))};var B,G=function(){return s.a.createElement(u.a,null,s.a.createElement(l,null),s.a.createElement("div",{className:"App"},s.a.createElement(i.d,null,s.a.createElement(i.b,{exact:!0,path:"/",render:function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement(q,null),s.a.createElement(L,null))}}),s.a.createElement(i.b,{exact:!0,path:"/posts/:postId",component:J}),s.a.createElement(i.b,{exact:!0,path:"/editPost/:postId",component:z}),s.a.createElement(i.a,{to:"/"}))))},W=Object(g.b)("users/fetchUsers",Object(v.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.get("/fakeApi/users");case 2:return t=e.sent,e.abrupt("return",t.users);case 4:case"end":return e.stop()}}),e)})))),V=Object(g.c)({name:"users",initialState:[],reducers:{},extraReducers:Object(E.a)({},W.fulfilled,(function(e,t){return t.payload}))}).reducer,H=Object(g.a)({reducer:{posts:A,users:V}}),K=n(60),Q=n(7),X=n(20),Y=n.n(X),Z=n(28),$=n(44),_=n.n($),ee=Q.c.extend({serializeIds:"always"}),te=_()(),ne=localStorage.getItem("randomTimestampSeed");function ae(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(te()*(t-e+1))+e}ne?B=new Date(ne):(ne=(B=new Date).toISOString(),localStorage.setItem("randomTimestampSeed",ne)),te=_()(ne),Object(Z.setRandom)(te),Y.a.seed(B.getTime());var re=function(e){return e[ae(0,e.length-1)]},se=["poked you","says hi!","is glad we're friends","sent you a gift"];new Q.d({routes:function(){this.namespace="fakeApi",this.timing=2e3,this.resource("users"),this.resource("posts"),this.resource("comments");var e=this;this.post("/posts",(function(t,n){var a=this.normalizedRequestAttrs();a.date=(new Date).toISOString();var r=t.users.find(a.userId);if(a.user=r,"error"===a.content)throw new Error("Could not save the post!");return e.create("post",a)})),this.get("/posts/:postId/comments",(function(e,t){return e.posts.find(t.params.postId).comments})),this.get("/notifications",(function(e,t){var n,a=ae(1,5),r=new Date;return t.queryParams.since?n=Object(p.a)(t.queryParams.since):(n=new Date(r.valueOf())).setMinutes(n.getMinutes()-15),{notifications:Object(K.a)(Array(a)).map((function(){var t=re(e.db.users),a=re(se);return{id:Object(g.d)(),date:Y.a.date.between(n,r).toISOString(),message:a,user:t.id,read:!1,isNew:!0}}))}}))},models:{user:Q.b.extend({posts:Object(Q.g)()}),post:Q.b.extend({user:Object(Q.f)(),comments:Object(Q.g)()}),comment:Q.b.extend({post:Object(Q.f)()}),notification:Q.b.extend({})},factories:{user:Q.a.extend({id:function(){return Object(g.d)()},firstName:function(){return Y.a.name.firstName()},lastName:function(){return Y.a.name.lastName()},name:function(){return Y.a.name.findName(this.firstName,this.lastName)},username:function(){return Y.a.internet.userName(this.firstName,this.lastName)},afterCreate:function(e,t){t.createList("post",3,{user:e})}}),post:Q.a.extend({id:function(){return Object(g.d)()},title:function(){return Object(Z.sentence)()},date:function(){return Y.a.date.recent(7)},content:function(){return Object(Z.article)(1)},reactions:function(){return{thumbsUp:0,hooray:0,heart:0,rocket:0,eyes:0}},afterCreate:function(e,t){},user:Object(Q.e)()}),comment:Q.a.extend({id:function(){return Object(g.d)()},date:function(){return Y.a.date.past(2)},text:function(){return Object(Z.paragraph)()},post:Object(Q.e)()})},serializers:{user:ee,post:ee,comment:ee},seeds:function(e){e.createList("user",3)}}),H.dispatch(W()),o.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(m.a,{store:H},s.a.createElement(G,null))),document.getElementById("root"))},63:function(e,t,n){e.exports=n(1135)},68:function(e,t,n){}},[[63,1,2]]]);
//# sourceMappingURL=main.b50d8abd.chunk.js.map